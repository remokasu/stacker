# Stacker: RPN Calculator

# 概要

ある晴れた日、学生Aは数学の試験に挑むため、緊張しながら教室へ向かっていました。しかし、彼はある重要なものを忘れてしまっていたのです。それは、関数電卓でした。

<br>

`学生A（焦りながら）`
~~~
先生、電卓を忘れちゃったんですが、お借りできますか？
~~~

`教授（待ってました！と言いたげな表情で）`
~~~
もちろんだ。特別に君にコレを貸してあげよう。
ヒューレットパッカードの稀代の名機 「hp 50G」！！
とっくに生産終了してしまって今では新品で買うことなど不可能なシロモノだ。
Amaz●nではプレミアがついて10倍の値段で取引されている。
このでっかい画面にはグラフも描画できちゃうぞ！
さらにこの小さな端子はなななななんとRS-232！シリアル通信だってできちゃう！
電卓のくせに一体何と通信するんだろうねぇ！？
まあ、何故かコネクタは公式から発売されることは無かったから実質幻の機能だがな...
どうだ？凄いだろう？
~~~

`学生A（顔を輝かせつつ）`
~~~
ええっ！なにそれチートアイテムぅ！？（よく分かんないけど凄そう！デカイし！)
やったあ...これで試験も余裕です！！(泣）
~~~

`教授（ニヤリと笑いながら）`
~~~
ただし、これは逆ポーランド記法の電卓だぞ
~~~

`学生A（戸惑いつつ）`
~~~
逆ポ...？逆ポーランドって何です？よく分かんないけど、なんかカッコいいですね！
~~~

`教授（クスクス笑い）`
~~~
ちょっと普通の電卓とは扱い方が異なるだけだ。
なに、心配することはないよ。普通の電卓のようなモードにも切り替えられるからね。
~~~

`学生A（安心しながら）`
~~~
なるほど！ありがとうございます！！たすかりましたああ！！
~~~

`教授（声には出さず）`
~~~
（ただし切り替え方は初見では分かり難いだろうねｸｸｸ...）
~~~


<br>
その試験で学生Aは泣いたという。

このプログラムは、A君のトラウマを追体験することができる。

<br>

<hr>

python3が無ければ事前にインストールしてください。
以下は`stacker`のインストール方法です。

1. ダウンロード
~~~ bash
> git clone git@github.com:remokasu/stacker.git
~~~

2. 依存環境インストール
~~~ bash
> pip install termcolor
~~~
* windowsの場合のみ
~~~ bash
> pip install pyreadline
~~~

3. 起動
~~~ bash
> cd stacker/stacker
> python stacker.py
~~~

4. またはインストール
~~~ bash
cd stacker
> python setup.py install
~~~

* 遊び終わったら削除しましょう
~~~ bash
> python -m pip uninstall stacker
~~~

# 使い方

<hr>

## 四則演算子:
### 加算 (+)
~~~
stacker:0> 3 4 +
[7.0]
~~~

### 減算 (-)
~~~
stacker:0> 5 3 -
[2.0]
~~~

### 乗算 (*)
~~~
stacker:0> 3 4 *
[12.0]
~~~

### 除算 (/)
~~~
stacker:0> 8 4 /
[2.0]
~~~

<hr>

## 比較演算子:
###  等しい (==)
~~~
stacker:0> 3 3 ==
[True]
~~~

###  等しくない (!=)
~~~
stacker:0> 3 4 !=
[True]
~~~

###  より小さい (<)
~~~
stacker:0> 3 4 <
[True]
~~~

###  以下 (<=)
~~~
stacker:0> 4 4 <=
[True]
~~~

###  より大きい (>)
~~~
stacker:0> 5 4 >
[True]
~~~

###  以上 (>=)
~~~
stacker:0> 5 5 >=
[True]
~~~

<hr>

## 論理演算子:
### AND (and)
~~~
stacker:0> true false and
[False]
~~~

### OR (or)
~~~
stacker:0> true false or
[True]
~~~

### NOT (not)
~~~
stacker:0> true not
[False]
stacker:1> false not
(ans) True
~~~

<hr>

## べき乗演算子:
### べき乗 (^)
~~~
stacker:0> 2 3 ^
[8.0]
~~~

<hr>

## 三角関数:
### 正弦関数 (sin)
~~~
stacker:0> pi 2 / sin
[1.0]
~~~

### 余弦関数 (cos)
~~~
stacker:0> pi cos
[-1.0]
~~~

### 正接関数 (tan)
~~~
stacker:0> pi 4 / tan
[1.0]
~~~

<hr>

## 自作関数:
### 例 1: 平方根を計算する関数 (sqrt)
~~~ bash
stacker:0> x sqrt => x 0.5 ^
stacker:1> 4 sqrt
[2.0]
~~~


### 例 2: 二つの数の平均を計算する関数 (average)
~~~ bash
stacker:0> x y average => x y + 2 /
stacker:1> 2 6 average
[4.0]
~~~


(関数定義の構文はRPN構文っぽい独自定義の構文なので突っ込まないでくれ)

<br>

<hr>

## こんな入力も出来るよ。というかこっちが普通の使い方
(例) 3 4 +
~~~ bash
stacker:0> 3
[3.0]
stacker:1> 4
[3.0, 4.0]
stacker:2> +
[7.0]
~~~

## exit
`exit` で終了
~~~
stacker:0> exit
~~~
